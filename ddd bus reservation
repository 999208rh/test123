<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>üöç –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∞–≤—Ç–æ–±—É—Å–æ–≤</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-green-50 to-green-100 min-h-screen p-4">

<div class="max-w-4xl mx-auto bg-white rounded-xl shadow-lg flex flex-col overflow-hidden">
  <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
  <div class="bg-green-600 text-white p-6 text-center">
    <h1 class="text-3xl font-bold mb-2">üöç –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∞–≤—Ç–æ–±—É—Å–æ–≤</h1>
  </div>

  <!-- –í–∫–ª–∞–¥–∫–∏ -->
  <div class="flex flex-col md:flex-row md:divide-x divide-gray-300">
    <!-- –í–∫–ª–∞–¥–∫–∞ –≤—Ö–æ–¥–∞ -->
    <div class="p-4 md:w-1/4">
      <h2 class="text-xl font-semibold mb-4">–í—Ö–æ–¥</h2>
      <div class="mb-4">
        <label class="block mb-1 font-medium">–õ–æ–≥–∏–Ω:</label>
        <input id="loginUser" type="text" class="w-full px-3 py-2 border border-gray-300 rounded" placeholder="–í–≤–µ–¥–∏—Ç–µ –ª–æ–≥–∏–Ω"/>
      </div>
      <div class="mb-4">
        <label class="block mb-1 font-medium">–ü–∞—Ä–æ–ª—å:</label>
        <input id="loginPass" type="password" class="w-full px-3 py-2 border border-gray-300 rounded" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å"/>
      </div>
      <button id="loginBtn" class="w-full bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded">–í–æ–π—Ç–∏</button>
    </div>

    <!-- –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ -->
    <div class="p-4 md:w-1/4" id="bookingSection" style="display:none;">
      <h2 class="text-xl font-semibold mb-4">–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∏–ª–µ—Ç–∞</h2>
      <div class="mb-3">
        <label class="block mb-1 font-medium">–ò–º—è:</label>
        <input id="name" type="text" class="w-full px-3 py-2 border border-gray-300 rounded" placeholder="–í–∞—à–µ –∏–º—è"/>
      </div>
      <div class="mb-3">
        <label class="block mb-1 font-medium">–ê–≤—Ç–æ–±—É—Å:</label>
        <select id="bus" class="w-full px-3 py-2 border border-gray-300 rounded">
          <option>BUS101</option>
          <option>BUS202</option>
          <option>BUS303</option>
        </select>
      </div>
      <div class="mb-3">
        <label class="block mb-1 font-medium">–ú–µ—Å—Ç:</label>
        <input id="seats" type="number" class="w-full px-3 py-2 border border-gray-300 rounded" placeholder="–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–µ—Å—Ç"/>
      </div>
      <div class="mb-3">
        <label class="block mb-1 font-medium">–î–∞—Ç–∞ –ø–æ–µ–∑–¥–∫–∏ (–¥–¥-–º–º-–≥–≥–≥–≥):</label>
        <input id="date" type="text" class="w-full px-3 py-2 border border-gray-300 rounded" placeholder="01-01-2024"/>
      </div>
      <div class="mb-3">
        <label class="block mb-1 font-medium">–ú–µ—Ç–æ–¥ –æ–ø–ª–∞—Ç—ã:</label>
        <select id="payment" class="w-full px-3 py-2 border border-gray-300 rounded">
          <option>–ù–∞–ª–∏—á–Ω—ã–µ</option>
          <option>UPI</option>
          <option>–ö–∞—Ä—Ç–∞</option>
        </select>
      </div>
      <button id="bookBtn" class="w-full bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded">–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –±–∏–ª–µ—Ç</button>
    </div>

    <!-- –ü—Ä–æ—Å–º–æ—Ç—Ä –±–∏–ª–µ—Ç–æ–≤ -->
    <div class="p-4 md:w-1/4" id="viewSection" style="display:none;">
      <h2 class="text-xl font-semibold mb-4">–í—Å–µ –±–∏–ª–µ—Ç—ã</h2>
      <button id="refreshBtn" class="mb-4 bg-gray-600 hover:bg-gray-700 text-white py-2 px-4 rounded">–û–±–Ω–æ–≤–∏—Ç—å</button>
      <textarea id="ticketsArea" class="w-full h-64 p-2 border border-gray-300 rounded" readonly></textarea>
    </div>

    <!-- –û—Ç–º–µ–Ω–∞ –±–∏–ª–µ—Ç–∞ -->
    <div class="p-4 md:w-1/4" id="cancelSection" style="display:none;">
      <h2 class="text-xl font-semibold mb-4">–û—Ç–º–µ–Ω–∞ –±–∏–ª–µ—Ç–∞</h2>
      <div class="mb-3">
        <label class="block mb-1 font-medium">ID –±–∏–ª–µ—Ç–∞:</label>
        <input id="cancelId" type="text" class="w-full px-3 py-2 border border-gray-300 rounded" placeholder="–í–≤–µ–¥–∏—Ç–µ ID"/>
      </div>
      <button id="cancelBtn" class="w-full bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded">–û—Ç–º–µ–Ω–∏—Ç—å –±–∏–ª–µ—Ç</button>
    </div>
  </div>
</div>

<script>
  // –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
  const loginBtn = document.getElementById('loginBtn');
  const loginUser = document.getElementById('loginUser');
  const loginPass = document.getElementById('loginPass');

  const bookingSection = document.getElementById('bookingSection');
  const viewSection = document.getElementById('viewSection');
  const cancelSection = document.getElementById('cancelSection');

  loginBtn.addEventListener('click', () => {
    const user = loginUser.value.trim();
    const pass = loginPass.value.trim();
    if (user === 'admin' && pass === '1234') {
      alert('–£—Å–ø–µ—à–Ω—ã–π –≤—Ö–æ–¥');
      bookingSection.style.display = 'block';
      viewSection.style.display = 'block';
      cancelSection.style.display = 'block';
    } else {
      alert('–ù–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ!');
    }
  });

  // –ú–∞—Å—Å–∏–≤ –±–∏–ª–µ—Ç–æ–≤
  const tickets = [];

  // –ü–æ–ª—É—á–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
  const nameInput = document.getElementById('name');
  const busSelect = document.getElementById('bus');
  const seatsInput = document.getElementById('seats');
  const dateInput = document.getElementById('date');
  const paymentSelect = document.getElementById('payment');
  const ticketsArea = document.getElementById('ticketsArea');

  const bookBtn = document.getElementById('bookBtn');
  const refreshBtn = document.getElementById('refreshBtn');
  const cancelBtn = document.getElementById('cancelBtn');
  const cancelIdInput = document.getElementById('cancelId');

  // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ ID –±–∏–ª–µ—Ç–∞
  function generateTicketID() {
    return 'TICK' + Math.floor(Math.random() * 9000 + 1000);
  }

  // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤—Å–µ—Ö –±–∏–ª–µ—Ç–æ–≤
  function loadTickets() {
    ticketsArea.value = '';
    for (const ticket of tickets) {
      ticketsArea.value += ticket + '\n----------------------------\n';
    }
  }

  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
  document.getElementById('bookBtn').addEventListener('click', () => {
    const name = nameInput.value.trim();
    const bus = busSelect.value;
    const seats = parseInt(seatsInput.value.trim());
    const date = dateInput.value.trim();
    const payment = paymentSelect.value;

    if (!name || !seats || !date) {
      alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è!');
      return;
    }

    if (isNaN(seats) || seats <= 0) {
      alert('–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —á–∏—Å–ª–æ –º–µ—Å—Ç.');
      return;
    }

    const totalSeatsBooked = tickets.filter(t => t.includes(`Bus: ${bus}`)).length;
    const MAX_SEATS = 40;

    if (totalSeatsBooked + seats > MAX_SEATS) {
      alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–µ—Å—Ç –Ω–∞ —ç—Ç–æ–º –∞–≤—Ç–æ–±—É—Å–µ.');
      return;
    }

    const fare = seats * 200;
    const ticketID = generateTicketID();

    const ticket = `Ticket ID: ${ticketID}
Name: ${name}
Bus: ${bus}
Seats: ${seats}
Date: ${date}
Payment: ${payment}
Fare: ‚Çπ${fare}`;

    alert('–ë–∏–ª–µ—Ç —É—Å–ø–µ—à–Ω–æ –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω:\n\n' + ticket);
    tickets.push(ticket);
    loadTickets();
    // –û—á–∏—Å—Ç–∫–∞ –ø–æ–ª–µ–π
    nameInput.value = '';
    seatsInput.value = '';
    dateInput.value = '';
  });

  // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –±–∏–ª–µ—Ç–æ–≤
  document.getElementById('refreshBtn').addEventListener('click', loadTickets);

  // –û—Ç–º–µ–Ω–∞ –±–∏–ª–µ—Ç–∞
  document.getElementById('cancelBtn').addEventListener('click', () => {
    const idToCancel = cancelIdInput.value.trim();
    const index = tickets.findIndex(t => t.startsWith(`Ticket ID: ${idToCancel}`));
    if (index !== -1) {
      tickets.splice(index, 1);
      alert('–ë–∏–ª–µ—Ç –æ—Ç–º–µ–Ω–µ–Ω.');
      loadTickets();
    } else {
      alert('ID –±–∏–ª–µ—Ç–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω.');
    }
  });
</script>

</body>
</html>
